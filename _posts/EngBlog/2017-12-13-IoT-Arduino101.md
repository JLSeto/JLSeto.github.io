---
layout: post
category: EngBlog
title: "IoT with Arduino101"
language: English
ref: Post-IoT-Arduino101
date: 2017-12-13
---

## Overview:
The [Arduino101](https://store.arduino.cc/usa/arduino-101) is a microcontroller board that is based off of the Intel Curie Module, which also includes the Intel Quark Microcontroller C1000.  This board comes with a 6-axis accelerometer/gyrometer and also has built in Bluetooth low Energy (BLE).  For this project, the Arduino101 is set up to collect acceleration and gyrometer data, and then advertise this data over BLE.  A client device is setup to connect to the device via bluetooth, and then send that data over wifi to a server. The server then forwards that data to our webpage, where the data is graphed and displayed.

<div class="mb-3">
<figure>
  <img class="mx-auto d-block mb-3" style="width: 600px;" src="/assets/img/projects/arduino101/curie.png" alt="cc2650_diagram">
  <figcaption class="figure-caption text-center">Curie Module</figcaption>
</figure>
</div>

## How it Works:
Standard Arduino code along with the "CurieBLE" and "CurieIMU" libraries were used to write the code for the Arduino101 board.  The board is set up as a peripheral with one service that contains seven characteristics.  One characteristic is time (t) and the other six are the acceleration/gyrometer values (ax, ay, az, gx, gy, gz).  The service and characteristics are also each assigned a UUID.  This allows a client device to connect, subscribe, and receive notifications for a particular data point or all data points.

On my client device, Node.js along with [Noble](https://github.com/sandeepmistry/noble) is used to search and connect to the Arduino101 by searching for it's service UUID.  Once connected, the client device looks under the assigned Service UUID for each Characteristic UUID.  Once found, notifications are then turned on for each characteristic, and [Socket.io](https://socket.io/) is used to forward that data to my server.  (Note: One reason why Socket.io was used rather than [WebSockets](https://github.com/websockets/ws) is because of [multiplexing](https://en.wikipedia.org/wiki/Multiplexing).  Socket.io's API makes it quite easy to send multiple signals over one channel.)

Node.js along with [Express](https://expressjs.com/) is used to set up my server.  Socket.io once again forwards the data from my server to my webpage, where the raw data values are displayed and graphed for the user.  The webpage was created using frameworks such as [Bootstrap](https://getbootstrap.com/) and [Angularjs](https://angularjs.org/). Google Charts is used to graph the values in real time.

## Hardware:
- Arduino101
- Laptop (Ubuntu OS)

## Software/Modules/Frameworks:
- Node.js
- Socket.io
- Noble
- Express
- Angularjs
- BootStrap
- Google Charts
- HTML, CSS, JavaScript

## References:
[CurieBLE](https://www.arduino.cc/en/Reference/CurieBLE)<br>
[Multiplexing using Websockets](https://www.rabbitmq.com/blog/2012/02/23/how-to-compose-apps-using-websockets/)<br>
